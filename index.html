<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>yum.chive</title>
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; background: #fffbe7; color: #4e3900; }
    header {
      background: #ffda3c; color: #4e3900;
      border-bottom: 3px solid #ecc700;
      box-shadow: 0 2px 8px rgba(255,218,60,0.15);
      position: relative; padding: 32px 0 24px 0; margin-bottom:0;
      display:flex; justify-content:center; align-items:center;
      z-index: 1003;
    }
    #siteName {
      font-weight: 800; font-size: 2em;
      border: 3.5px solid #e7be17; border-radius: 18px; 
      padding: 14px 40px; background:#fffde8;
      box-shadow:0 2px 14px rgba(255,220,70,0.18);
      position: relative;
      z-index: 1004;
    }
    .header-right {
      position: absolute; right: 5vw; top: 32px; display: flex; gap: 10px;
      z-index: 1004;
    }
    .header-link { color: #ad8e01; font-weight: 650; text-decoration: none; }
    .header-link:hover { color: #d5ad00; }

    #sideBar {
      position: fixed;
      top: 80px;
      left: 10px;
      width: 200px;
      height: calc(100vh - 90px);
      display: flex;
      flex-direction: column;
      gap: 24px;
      z-index: 1002;
    }

    #communityBox {
      background: #fffbe7; border: 2px solid #d4bc00;
      border-radius: 12px; padding: 16px 20px;
      box-shadow: 0 2px 14px rgba(212,188,0,0.25);
      font-size: 0.95em;
      color: #755f00;
      font-weight: 700;
      text-align: center;
    }

    #rankingBox {
      background: #fffbe7; border: 2px solid #e7be17;
      border-radius: 12px; padding: 20px 20px;
      width: 200px;
      box-shadow: 0 2px 14px rgba(255,220,70,0.14);
      font-size: 0.95em;
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
      max-height: 65vh;
      position: sticky;
      top: 20px;
      z-index: 1002;
    }
    #rankingBox h4 {
      margin: 0 0 10px 0;
      color: #ad8e01;
      font-weight: 700;
      text-align: center;
      opacity: 0.6;
    }
    #rankingList {
      margin: 0; padding-left: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      list-style: none;
    }
    #rankingList li {
      display: flex; align-items: center; gap: 10px;
      font-weight: 600;
    }
    .medal {
      display: flex; align-items: center; justify-content: center;
      width: 26px; height: 26px;
      border-radius: 50%;
      color: white;
      font-weight: bold;
      font-size: 0.9rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      flex-shrink: 0;
    }
    .gold { background: #f5c940; box-shadow: 0 0 6px #f5c940cc; }
    .silver { background: #c0c0c0; box-shadow: 0 0 6px #c0c0c0cc; }
    .bronze { background: #cd7f32; box-shadow: 0 0 6px #cd7f32cc; }
    .rank-number {
      width: auto !important;
      height: auto !important;
      border-radius: 0 !important;
      background: none !important;
      color: #856300 !important;
      font-weight: 600 !important;
      box-shadow: none !important;
      display: inline-flex !important;
      align-items: center !important;
      justify-content: flex-start !important;
      padding-left: 0 !important;
      font-size: 1rem !important;
    }

    #mainWrapper {
      display: flex;
      max-width: 1080px;
      margin: 80px auto 24px auto;
      gap: 24px;
      padding-left: 220px;
      justify-content: space-between;
    }

    #contentWrapper {
      flex-grow: 1;
      max-width: 720px;
    }

    #noticeBox {
      background: #fffbe7;
      border: 2px solid #e7be17;
      border-radius: 12px;
      padding: 20px;
      width: 200px;
      box-shadow: 0 2px 14px rgba(255,220,70,0.14);
      font-size: 0.95em;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 65vh;
      overflow-y: auto;
      position: sticky;
      top: 20px;
      z-index: 1002;
    }
    #noticeBox h4 {
      margin: 0 0 10px 0;
      color: #ad8e01;
      font-weight: 700;
      text-align: center;
      opacity: 0.6;
    }
    #noticeList {
      list-style: none;
      margin: 0;
      padding-left: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    #noticeList li {
      font-weight: 600;
      cursor: default;
    }

    /* ÌïÑÌÑ∞ ÌååÌä∏ ÌÖåÎëêÎ¶¨ Ï∂îÍ∞Ä */
    .filter-wrapper {
      border: 2px solid #e7be17;
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 20px;
      background: #fffbe7;
      box-shadow: 0 2px 14px rgba(255,220,70,0.14);
    }

    .filter-group {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }
    .filter-title {
      color: #856300; font-weight: 700; font-size: 1.1rem;
      min-width: 50px;
      white-space: nowrap;
    }
    .filter-bar {
      display: flex; gap: 14px; flex-wrap: wrap;
      justify-content: flex-start;
      flex-grow: 1;
    }
    .filter-bar button {
      background: #ffe065; border: none; border-radius: 7px;
      padding: 8px 18px; cursor: pointer; font-weight: 700; 
      color: #855900; font-size: 0.95rem;
      min-width: 72px;
      text-align: center;
    }
    .filter-bar button.active {
      background: #ffe998; color: #d5ad00; outline: 2px solid #ffe065;
    }

    #restaurantList {
      background: #fffde8;
      padding: 25px 22px;
      border-radius: 12px;
      box-shadow: 0 2px 13px rgba(255,215,57,0.13);
      max-width: 100%;
    }

    ul.restaurants { list-style: none; padding: 0; margin: 0; }
    .restaurant-item {
      display: flex; align-items: flex-start; gap: 18px;
      border-bottom: 1px solid #fee975; padding: 18px 0;
      cursor: pointer;
      flex-wrap: wrap;
    }
    .restaurant-info {
      display: flex; flex-direction: column; gap: 4px;
    }
    .restaurant-name { font-size: 1.18em; font-weight: 700; }
    .restaurant-addr, .restaurant-menu, .restaurant-type {
      font-size: 0.9em; color: #666500; margin: 0;
    }
    .dish-name {
      font-size: 0.95em; color: #c98800; margin-top: 2px;
    }
    .thumb { width: 80px; height: 80px; object-fit: cover; border-radius: 10px; }

    .modal-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background:rgba(60,50,10,0.24);
      display: none; align-items: center; justify-content: center; z-index: 1001;
    }
    .modal-box {
      background: #fffde8; min-width: 320px; max-width: 92vw; padding: 28px 34px 19px 34px;
      border-radius:16px; box-shadow: 0 10px 32px rgba(80,60,0,0.19);
      position: relative; display: flex; flex-direction: column; align-items: center; text-align: center;
    }
    .modal-box h3 {
      margin: 6px 0 11px 0; font-size: 1.34em; color: #be9003;
    }
    .modal-box img {
      width: 110px; height: 110px; object-fit: cover; border-radius: 13px; margin-bottom: 20px;
    }
    .modal-box .addrs {
      font-size: 1.04em; color: #666500; margin: 3px 0 7px 0;
    }
    .modal-box .menus {
      font-weight: 600; margin-top: 10px; font-size: 1.07em;
    }
    .modal-box .clickCount {
      margin-top: 8px; font-size: 0.95em; color: #855900;
    }
    .close-btn {
      position: absolute; top: 7px; right: 15px; background: #ffd700; border: none;
      color: #874c00; font-size: 1.5em; cursor: pointer; border-radius: 50%; width: 33px; height: 33px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <span id="siteName">yum.chive</span>
    <div class="header-right">
      <a href="#" class="header-link">Î°úÍ∑∏Ïù∏</a>
      <a href="#" class="header-link">Í≥†Í∞ùÏÑºÌÑ∞</a>
    </div>
  </header>

  <div id="sideBar">
    <div id="communityBox">
      <h4>üåü Ïª§ÎÆ§ÎãàÌã∞</h4>
      <p>ÎßõÏßë ÌõÑÍ∏∞, ÏßàÎ¨∏, Ï∂îÏ≤úÍ∏ÄÏùÑ ÏûêÏú†Î°≠Í≤å ÎÇòÎàÑÏÑ∏Ïöî!</p>
    </div>
    <div id="rankingBox">
      <h4>üçΩÔ∏è Ïù∏Í∏∞ Îû≠ÌÇπ</h4>
      <ol id="rankingList"></ol>
    </div>
  </div>

  <div id="mainWrapper">
    <div id="contentWrapper">
      <div class="filter-wrapper">
        <div class="filter-group">
          <div class="filter-title">ÏúÑÏπò</div>
          <div class="filter-bar" id="categoryBar">
            <button class="active" data-cat="Í±¥ÎåÄÏûÖÍµ¨">Í±¥ÎåÄÏûÖÍµ¨</button>
            <button data-cat="Ï§ëÎ¨∏">Ï§ëÎ¨∏</button>
            <button data-cat="ÌõÑÎ¨∏">ÌõÑÎ¨∏</button>
            <button data-cat="Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê">Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê</button>
          </div>
        </div>
        <div class="filter-group">
          <div class="filter-title">ÏÑ†ÌÉù</div>
          <div class="filter-bar" id="dietBar">
            <button data-tag="vegan">ÎπÑÍ±¥</button>
            <button data-tag="halal">Ìï†ÎûÑ</button>
            <button data-tag="glutenfree">Í∏ÄÎ£®ÌÖêÌîÑÎ¶¨</button>
            <button data-tag="under10k">ÎßåÏõêÏù¥Ìïò</button>
          </div>
        </div>
      </div>
      <section id="restaurantList"></section>
    </div>

    <aside id="noticeBox">
      <h4>üì¢ Í≥µÏßÄÏÇ¨Ìï≠</h4>
      <ul id="noticeList">
        <li>ÎßõÏßë Ï∂îÏ≤ú Î∞õÏïÑÏöî!</li>
        <li>Ïù¥Î≤à Ï£º Ìï†Ïù∏ Ïù¥Î≤§Ìä∏ ÏßÑÌñâÏ§ë</li>
        <li>Ïã†Í∑ú ÏãùÎãπ Îì±Î°ù ÏïàÎÇ¥</li>
      </ul>
    </aside>
  </div>

  <div id="modalBg" class="modal-bg">
    <div class="modal-box">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      <img id="modalImg" src="" alt="ÏãùÎãπ Ïù¥ÎØ∏ÏßÄ" />
      <h3 id="modalName"></h3>
      <div class="addrs" id="modalAddr"></div>
      <div class="menus" id="modalMenus"></div>
      <div class="clickCount" id="modalClicks"></div>
    </div>
  </div>

<script>
  const WHITE_IMG = "https://via.placeholder.com/80x80/FFFFFF/FFFFFF?text=+";

  const kunUniImgs = [
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20171222_273%2F1513909993152wbpV8_JPEG%2FfM-4sk2LkYUe0jmd83plu51X.JPG.jpg",
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20221105_150%2F1667640635518fdmMX_JPEG%2F01_%BE%D7%BC%C7%C4%C6-6.jpg",
    "", "", "",
    "", "", "", "", "",
    "", "", "", "", "",
    "", "", "", "", ""
  ];

  // ÏãùÎãπ Îç∞Ïù¥ÌÑ∞Ïóê Î∂ÑÎ•òÏôÄ ÏóÖÎç∞Ïù¥Ìä∏Îêú Ï£ºÏÜå Ï∂îÍ∞ÄÌï®
  const data = {
    "Í±¥ÎåÄÏûÖÍµ¨": [
      {name: "ÏÜ°ÌôîÏÇ∞ÏãúÎèÑÏÇ≠Î©¥", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 123-10", type: "ÌïúÏãù", img: kunUniImgs[0], tags: ["vegan"]},
      {name: "Ï†ïÎ©¥ Í±¥ÎåÄ", menu: "Ïö∞Îèô", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 456-5", type: "ÏùºÏãù", img: kunUniImgs[1], tags: []},
      {name: "Î™®Ï∏†Ïª§Ìîº Í±¥ÎåÄ", menu: "Ï¥àÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 78-3", type: "ÏùºÏãù¬∑Ïπ¥Ìéò", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "ÌïòÏù¥ÎîîÎùºÏò§ Í±¥ÎåÄÏ†ê", menu: "Îã≠ÌïúÎßàÎ¶¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 9-7", type: "Ï§ëÏãù", img: WHITE_IMG, tags: ["halal"]},
      {name: "Ïö∞ÎßàÏù¥ÎèÑ Í±¥ÎåÄÏ†ê", menu: "ÍπåÎ•¥Î≥¥ÎÇòÎùº", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 6-8", type: "ÏñëÏãù", img: WHITE_IMG, tags: []},
      {name: "ÎØ∏Î∂ÑÎãπ Í±¥ÎåÄ", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Îä•ÎèôÎ°ú 20-11", type: "ÏñëÏãù", img: WHITE_IMG, tags: ["glutenfree"]},
      {name: "Í≥ÑÌÉÑÏßë", menu: "Ïß¨ÎΩï", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 11-4", type: "Ï§ëÏãù", img: WHITE_IMG, tags: []},
      {name: "ÌïµÎ∞• Í±¥ÎåÄÏ†ê", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í±¥Íµ≠ÎåÄÎ°ú 15-2", type: "ÏùºÏãù", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "Î∞±ÏÜåÏ†ï Í±¥ÎåÄÎ≥∏Ï†ê", menu: "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎ°ú 12-1", type: "Ïπ¥Ìéò", img: WHITE_IMG, tags: []},
      {name: "Í≥†Î≤†Í∑úÏπ¥Ï∏† Í±¥ÎåÄÎ≥∏Ï†ê", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎ°ú 122-6", type: "ÌïúÏãù", img: WHITE_IMG, tags: []},
      {name: "ÏÑ±ÏàòÏôÑÎãπ Î≥∏Ï†ê", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏÑ±ÏàòÎèô 1Í∞Ä 23-17", type: "ÏñëÏãù", img: WHITE_IMG, tags: ["halal"]},
      {name: "Ïò§Ïú†ÎØ∏Îãπ Í±¥ÎåÄÏ†ê", menu: "Ï¥àÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 33-4", type: "ÏùºÏãù", img: WHITE_IMG, tags: []},
      {name: "ÌôîÍ∏∞Ïï†Ïï† Î≥∏Ï†ê", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í±¥ÎåÄÏûÖÍµ¨ 3Í∞Ä 13-9", type: "ÏùºÏãù", img: WHITE_IMG, tags: []},
      {name: "Í≥†Ìù•ÏàúÎåÄÍµ≠", menu: "Ïß¨ÎΩï", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 101-22", type: "Ï§ëÏãù", img: WHITE_IMG, tags: []},
      {name: "ÎØºÏ†ïÏãùÎãπ", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 5-2", type: "ÌïúÏãù", img: WHITE_IMG, tags: ["under10k"]},
      {name: "ÎèïÍ∞êÏûêÌÉï Ï†ÑÎ¨∏Ï†ê", menu: "Îã≠ÌïúÎßàÎ¶¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 55-3", type: "ÌïúÏãù", img: WHITE_IMG, tags: []},
      {name: "ÏïÑÏ∞åÎñ°Î≥∂Ïù¥", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 9-5", type: "Î∂ÑÏãù", img: WHITE_IMG, tags: []},
      {name: "Ìï®Ìù•Î≥∏Í∞ÄÎ©¥Ïò• Í±¥ÎåÄÏ†ê", menu: "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 7-10", type: "Ïπ¥Ìéò", img: WHITE_IMG, tags: []},
      {name: "ÎèôÌï¥Ìï¥Î¨º", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í¥ëÏßÑÍµ¨Ï≤≠ 2-11", type: "ÌïúÏãù", img: WHITE_IMG, tags: []},
      {name: "Îçî ÌÅ¥ÎûòÏãù 500 ÎùºÍµ¨Îú®", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 2-14", type: "ÏñëÏãù", img: WHITE_IMG, tags: []}
    ],
    "Ï§ëÎ¨∏": [
      {name: "ÎëêÏ∞ú Í±¥ÎåÄÏ†ê", menu: "Ï∞úÎã≠", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ï§ëÍ≥°Îèô 12-3", type: "ÌïúÏãù", img: WHITE_IMG, tags: []},
      {name: "Ï†ïÎ©¥ Íµ≠Ïàò", menu: "Íµ≠Ïàò", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ï§ëÍ≥°Îèô 8-9", type: "ÌïúÏãù", img: WHITE_IMG, tags: []},
      {name: "ÎÇ¥Í∞ÄÏ∞úÌïúÎã≠ Í±¥Íµ≠ÎåÄÏ†ê", menu: "Îã≠Í∞àÎπÑ", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÎèô 14-1", type: "ÌïúÏãù", img: WHITE_IMG, tags: []}
    ],
    "ÌõÑÎ¨∏": [
      {name: "ÏãúÌôçÏì∞ Í±¥ÎåÄ", menu: "Î≥∂ÏùåÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌõÑÎ¨∏Î°ú 112-5", type: "Ï§ëÏãù", img: "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20220712_282%2F16576252274583ilfO_JPEG%2F2AA67F98-63C8-482B-A6B3-7E3DAD363062.jpeg", tags: []},
      {name: "ÏÉàÎ°úÏù¥ Í±¥ÎåÄ", menu: "Î≤ÑÍ±∞", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌõÑÎ¨∏Î°ú 130-2", type: "Î≤ÑÍ±∞Î•ò", img: WHITE_IMG, tags: []},
      {name: "ÎûòÎπóÌôÄ Î≤ÑÍ±∞Ïª¥ÌçºÎãà Í±¥ÎåÄ", menu: "Ìï∏ÎìúÎ©îÏù¥Îìú Î≤ÑÍ±∞", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌõÑÎ¨∏Í∏∏ 18-7", type: "Î≤ÑÍ±∞Î•ò", img: WHITE_IMG, tags: ["under10k"]}
    ],
    "Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê": [
      {name: "ÏóêÏù¥ÎøîÎû® Íµ∞ÏûêÏ†ê", menu: "ÏñëÍ≥†Í∏∞Íµ¨Ïù¥", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÎèô 50-1", type: "ÏñëÏãù", img: WHITE_IMG, tags: []},
      {name: "ÏàòÌçºÏä¨ÎùºÏù¥ÎçîÏä§", menu: "Î≤ÑÍ±∞", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 15-6", type: "Î≤ÑÍ±∞Î•ò", img: WHITE_IMG, tags: ["under10k"]},
      {name: "ÌòºÎã§ÎùºÎ©ò", menu: "ÎùºÎ©ò", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 20-4", type: "ÏùºÏãù", img: WHITE_IMG, tags: []},
      {name: "Ï¥àÎùºÎ©ò", menu: "ÎùºÎ©ò", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 22-8", type: "ÏùºÏãù", img: WHITE_IMG, tags: ["glutenfree"]},
      {name: "Íæ∏ÏïÑ Í±¥ÎåÄÏ†ê", menu: "Î≤†Ìä∏ÎÇ® ÏåÄÍµ≠Ïàò", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í¥ëÏßÑÎ°ú 88-9", type: "ÏïÑÏãúÏïÑÏãù", img: WHITE_IMG, tags: ["vegan"]},
      {name: "Ïò§ÎßàÏπ¥ÏÑ∏ Ïò§ÏÇ¨Ïù¥Ï¥àÎ∞• Í±¥ÎåÄÎ≥∏Ï†ê", menu: "Ï¥àÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 77-12", type: "ÏùºÏãù", img: WHITE_IMG, tags: []}
    ]
  };

  let restaurantClicks = JSON.parse(localStorage.getItem('restaurantClicks') || '{}');
  let currentCategory = "Í±¥ÎåÄÏûÖÍµ¨";
  let currentDietTags = [];

  document.querySelectorAll('#categoryBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#categoryBar button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentCategory = btn.dataset.cat;
      renderRestaurants();
    });
  });

  document.querySelectorAll('#dietBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      const tag = btn.dataset.tag;
      if(currentDietTags.includes(tag)){
        currentDietTags = currentDietTags.filter(t => t !== tag);
        btn.classList.remove('active');
      } else {
        currentDietTags.push(tag);
        btn.classList.add('active');
      }
      renderRestaurants();
    });
  });

  function filterRestaurants(){
    let list = data[currentCategory] || [];
    if(currentDietTags.length === 0) return list;
    return list.filter(r => currentDietTags.every(tag => r.tags.includes(tag)));
  }

  function increaseClick(name) {
    if (!restaurantClicks[name]) {
      restaurantClicks[name] = 0;
    }
    restaurantClicks[name]++;
    localStorage.setItem('restaurantClicks', JSON.stringify(restaurantClicks));
    updateRanking();
  }

  function updateRanking() {
    const rankingList = document.getElementById('rankingList');
    rankingList.innerHTML = "";

    const rankingArr = Object.entries(restaurantClicks)
      .sort((a,b) => b[1] - a[1])
      .slice(0, 10);

    rankingArr.forEach(([name, count], i) => {
      const li = document.createElement('li');

      if(i === 0) {
        const medal = document.createElement('span');
        medal.classList.add('medal', 'gold');
        medal.textContent = '1';
        li.appendChild(medal);
      } else if(i === 1) {
        const medal = document.createElement('span');
        medal.classList.add('medal', 'silver');
        medal.textContent = '2';
        li.appendChild(medal);
      } else if(i === 2) {
        const medal = document.createElement('span');
        medal.classList.add('medal', 'bronze');
        medal.textContent = '3';
        li.appendChild(medal);
      } else {
        const rankNum = document.createElement('span');
        rankNum.classList.add('rank-number');
        rankNum.textContent = (i + 1) + '.';
        li.appendChild(rankNum);
      }

      const text = document.createTextNode(` ${name} (${count}Ìöå)`);
      li.appendChild(text);

      rankingList.appendChild(li);
    });
  }

  function renderRestaurants() {
    const container = document.getElementById('restaurantList');
    container.innerHTML = "";
    const list = filterRestaurants();

    if(!list.length){
      container.innerHTML = "<p>Ï°∞Í±¥Ïóê ÎßûÎäî ÏãùÎãπÏù¥ ÏóÜÏäµÎãàÎã§.</p>";
      return;
    }

    const ul = document.createElement('ul');
    ul.className = "restaurants";

    list.forEach(r => {
      const li = document.createElement('li');
      li.className = "restaurant-item";
      li.innerHTML = `
        <img src="${r.img || WHITE_IMG}" alt="${r.name}" class="thumb" />
        <div class="restaurant-info">
          <div class="restaurant-name">${r.name}</div>
          <div class="restaurant-addr">${r.addr}</div>
          <div class="restaurant-type">${r.type}</div>
          <div class="restaurant-menu">${r.menu}</div>
        </div>
      `;
      li.onclick = () => {
        increaseClick(r.name);
        openModal(r);
      };
      ul.appendChild(li);
    });

    container.appendChild(ul);
  }

  function openModal(r) {
    document.getElementById('modalImg').src = r.img || WHITE_IMG;
    document.getElementById('modalName').textContent = r.name;
    document.getElementById('modalAddr').textContent = "Ï£ºÏÜå: " + (r.addr || "Ï†ïÎ≥¥ ÏóÜÏùå");
    document.getElementById('modalMenus').textContent = "ÎåÄÌëúÎ©îÎâ¥: " + (r.menu || "Ï†ïÎ≥¥ ÏóÜÏùå");
    document.getElementById('modalClicks').textContent = "Ï°∞ÌöåÏàò: " + (restaurantClicks[r.name] || 0) + "Ìöå";
    document.getElementById('modalBg').style.display = 'flex';
  }

  function closeModal() {
    document.getElementById('modalBg').style.display = 'none';
  }

  document.getElementById('modalBg').onclick = function(e) {
    if(e.target === this) closeModal();
  };

  renderRestaurants();
  updateRanking();
</script>
</body>
</html>
