<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Yam Archive</title>
  <style>
    body { font-family: 'Arial', sans-serif; margin: 0; background: #fffbe7; color: #4e3900; }
    header {
      background: #ffda3c; color: #4e3900;
      border-bottom: 3px solid #ecc700;
      box-shadow: 0 2px 8px rgba(255,218,60,0.15);
      position: relative; padding: 32px 0 24px 0; margin-bottom:0;
      display:flex; justify-content:center; align-items:center;
    }
    #siteName {
      font-weight: 800; font-size: 2em;
      border: 3.5px solid #e7be17; border-radius: 18px; 
      padding: 14px 40px; background:#fffde8;
      box-shadow:0 2px 14px rgba(255,220,70,0.18);
    }
    .header-right {
      position: absolute; right: 5vw; top: 32px; display: flex; gap: 10px;
    }
    .header-link { color: #ad8e01; font-weight: 650; text-decoration: none; }
    .header-link:hover { color: #d5ad00; }

    /* ÌïÑÌÑ∞ ÏòÅÏó≠ Î¨∂Ïñ¥ÏÑú */
    .filter-wrapper {
      background: #fff2b2;
      padding: 14px 0 20px 0;
      border-bottom: 1.5px solid #fded8d;
      margin: 0 auto 12px auto;
      max-width: 720px;
      display: flex; flex-direction: column; gap: 10px; align-items: center;
    }
    .filter-bar { display: flex; gap: 14px; flex-wrap: wrap; justify-content: center; }
    .filter-bar button {
      background: #ffe065; border: none; border-radius: 7px;
      padding: 8px 18px; cursor: pointer; font-weight: 700; 
      color: #855900; font-size: 0.95rem;
    }
    .filter-bar button.active {
      background: #ffe998; color: #d5ad00; outline: 2px solid #ffe065;
    }
    
    #rankingBox {
      position: absolute; left: 20px; top: 85px; 
      background: #fffbe7; border: 2px solid #e7be17;
      border-radius: 12px; padding: 20px 24px;
      min-width: 170px;
      box-shadow: 0 2px 14px rgba(255,220,70,0.14);
      font-size: 0.95em;
    }

    #restaurantList { max-width: 660px; margin: 0 auto 24px auto; background: #fffde8;
      padding: 25px 22px; border-radius: 12px; box-shadow: 0 2px 13px rgba(255,215,57,0.13);}
    ul.restaurants { list-style: none; padding: 0; margin: 0; }
    .restaurant-item {
      display: flex; align-items: center; gap: 18px;
      border-bottom: 1px solid #fee975; padding: 18px 0;
      cursor: pointer;
    }
    .restaurant-name { font-size: 1.18em; font-weight: 700; }
    .dish-name { font-size: 0.95em; color: #c98800; margin-top: 5px;}
    .thumb { width: 80px; height: 80px; object-fit: cover; border-radius: 10px; }

    /* Î™®Îã¨ */
    .modal-bg {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background:rgba(60,50,10,0.24);
      display: none; align-items: center; justify-content: center; z-index: 1001;
    }
    .modal-box {
      background: #fffde8; min-width: 320px; max-width: 92vw; padding: 28px 34px 19px 34px;
      border-radius:16px; box-shadow: 0 10px 32px rgba(80,60,0,0.19);
      position: relative; display: flex; flex-direction: column; align-items: center; text-align: center;
    }
    .modal-box h3 {
      margin: 6px 0 11px 0; font-size: 1.34em; color: #be9003;
    }
    .modal-box img {
      width: 110px; height: 110px; object-fit: cover; border-radius: 13px; margin-bottom: 20px;
    }
    .modal-box .addrs {
      font-size: 1.04em; color: #666500; margin: 3px 0 7px 0;
    }
    .modal-box .menus {
      font-weight: 600; margin-top: 10px; font-size: 1.07em;
    }
    .modal-box .clickCount {
      margin-top: 8px; font-size: 0.95em; color: #855900;
    }
    .close-btn {
      position: absolute; top: 7px; right: 15px; background: #ffd700; border: none;
      color: #874c00; font-size: 1.5em; cursor: pointer; border-radius: 50%; width: 33px; height: 33px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <span id="siteName">Yam Archive</span>
    <div class="header-right">
      <a href="#" class="header-link">Î°úÍ∑∏Ïù∏</a>
      <a href="#" class="header-link">Í≥†Í∞ùÏÑºÌÑ∞</a>
    </div>
  </header>

  <div id="rankingBox">
    <h4>üçΩÔ∏è Ïù∏Í∏∞ Îû≠ÌÇπ</h4>
    <ol id="rankingList"></ol>
  </div>

  <div class="filter-wrapper">
    <div class="filter-bar" id="categoryBar">
      <button class="active" data-cat="Í±¥ÎåÄÏûÖÍµ¨">Í±¥ÎåÄÏûÖÍµ¨</button>
      <button data-cat="Ï§ëÎ¨∏">Ï§ëÎ¨∏</button>
      <button data-cat="ÌõÑÎ¨∏">ÌõÑÎ¨∏</button>
      <button data-cat="Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê">Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê</button>
    </div>
    <div class="filter-bar" id="dietBar">
      <button data-tag="vegan">ÎπÑÍ±¥</button>
      <button data-tag="halal">Ìï†ÎûÑ</button>
      <button data-tag="glutenfree">Í∏ÄÎ£®ÌÖêÌîÑÎ¶¨</button>
      <button data-tag="under10k">ÎßåÏõêÏù¥Ìïò</button>
    </div>
  </div>

  <section id="restaurantList"></section>

  <div id="modalBg" class="modal-bg">
    <div class="modal-box">
      <button class="close-btn" onclick="closeModal()">&times;</button>
      <img id="modalImg" src="" alt="ÏãùÎãπ Ïù¥ÎØ∏ÏßÄ" />
      <h3 id="modalName"></h3>
      <div class="addrs" id="modalAddr"></div>
      <div class="menus" id="modalMenus"></div>
      <div class="clickCount" id="modalClicks"></div>
    </div>
  </div>

<script>
  const WHITE_IMG = "https://via.placeholder.com/80x80/FFFFFF/FFFFFF?text=+";

  const kunUniImgs = [
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20171222_273%2F1513909993152wbpV8_JPEG%2FfM-4sk2LkYUe0jmd83plu51X.JPG.jpg",
    "https://search.pstatic.net/common/?src=https%3A%2F%2Fldb-phinf.pstatic.net%2F20221105_150%2F1667640635518fdmMX_JPEG%2F01_%BE%D7%BC%C7%C4%C6-6.jpg",
    "", "", "",
    "", "", "", "", "",
    "", "", "", "", "",
    "", "", "", "", ""
  ];

  const data = {
    "Í±¥ÎåÄÏûÖÍµ¨": [
      {name: "ÏÜ°ÌôîÏÇ∞ÏãúÎèÑÏÇ≠Î©¥", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í±¥ÎåÄÏûÖÍµ¨Î°ú 123", img: kunUniImgs[0], tags: ["vegan"]},
      {name: "Ï†ïÎ©¥ Í±¥ÎåÄ", menu: "Ïö∞Îèô", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 456", img: kunUniImgs[1], tags: []},
      {name: "Î™®Ï∏†Ïª§Ìîº Í±¥ÎåÄ", menu: "Ï¥àÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 78", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "ÌïòÏù¥ÎîîÎùºÏò§ Í±¥ÎåÄÏ†ê", menu: "Îã≠ÌïúÎßàÎ¶¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 9", img: WHITE_IMG, tags: []},
      {name: "Ïö∞ÎßàÏù¥ÎèÑ Í±¥ÎåÄÏ†ê", menu: "ÍπåÎ•¥Î≥¥ÎÇòÎùº", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 6", img: WHITE_IMG, tags: []},
      {name: "ÎØ∏Î∂ÑÎãπ Í±¥ÎåÄ", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Îä•ÎèôÎ°ú 20", img: WHITE_IMG, tags: ["glutenfree"]},
      {name: "Í≥ÑÌÉÑÏßë", menu: "Ïß¨ÎΩï", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 11", img: WHITE_IMG, tags: []},
      {name: "ÌïµÎ∞• Í±¥ÎåÄÏ†ê", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í±¥Íµ≠ÎåÄÎ°ú 15", img: WHITE_IMG, tags: ["vegan", "under10k"]},
      {name: "Î∞±ÏÜåÏ†ï Í±¥ÎåÄÎ≥∏Ï†ê", menu: "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎ°ú 12", img: WHITE_IMG, tags: []},
      {name: "Í≥†Î≤†Í∑úÏπ¥Ï∏† Í±¥ÎåÄÎ≥∏Ï†ê", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎ°ú 122", img: WHITE_IMG, tags: []},
      {name: "ÏÑ±ÏàòÏôÑÎãπ Î≥∏Ï†ê", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏÑ±ÏàòÎèô", img: WHITE_IMG, tags: ["halal"]},
      {name: "Ïò§Ïú†ÎØ∏Îãπ Í±¥ÎåÄÏ†ê", menu: "Ï¥àÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 33", img: WHITE_IMG, tags: []},
      {name: "ÌôîÍ∏∞Ïï†Ïï† Î≥∏Ï†ê", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í±¥ÎåÄÏûÖÍµ¨ 3Í∞Ä", img: WHITE_IMG, tags: []},
      {name: "Í≥†Ìù•ÏàúÎåÄÍµ≠", menu: "Ïß¨ÎΩï", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô", img: WHITE_IMG, tags: []},
      {name: "ÎØºÏ†ïÏãùÎãπ", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 5", img: WHITE_IMG, tags: ["under10k"]},
      {name: "ÎèïÍ∞êÏûêÌÉï Ï†ÑÎ¨∏Ï†ê", menu: "Îã≠ÌïúÎßàÎ¶¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÏûêÏñëÎèô 55", img: WHITE_IMG, tags: []},
      {name: "ÏïÑÏ∞åÎñ°Î≥∂Ïù¥", menu: "ÎèàÏπ¥Ï∏†", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõêÎ°ú 9", img: WHITE_IMG, tags: []},
      {name: "Ìï®Ìù•Î≥∏Í∞ÄÎ©¥Ïò• Í±¥ÎåÄÏ†ê", menu: "ÏïÑÎ©îÎ¶¨Ïπ¥ÎÖ∏", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÏó≠Î°ú 7", img: WHITE_IMG, tags: []},
      {name: "ÎèôÌï¥Ìï¥Î¨º", menu: "ÎπÑÎπîÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Í¥ëÏßÑÍµ¨Ï≤≠", img: WHITE_IMG, tags: []},
      {name: "Îçî ÌÅ¥ÎûòÏãù 500 ÎùºÍµ¨Îú®", menu: "Ïä§ÌÖåÏù¥ÌÅ¨", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌôîÏñëÎèô 2", img: WHITE_IMG, tags: []}
    ],
    "Ï§ëÎ¨∏": [
      {name: "ÎëêÏ∞ú Í±¥ÎåÄÏ†ê", menu: "Ï∞úÎã≠", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ï§ëÍ≥°Îèô 12", img: WHITE_IMG, tags: []},
      {name: "Ï†ïÎ©¥ Íµ≠Ïàò", menu: "Íµ≠Ïàò", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Ï§ëÍ≥°Îèô 8", img: WHITE_IMG, tags: []},
      {name: "ÎÇ¥Í∞ÄÏ∞úÌïúÎã≠ Í±¥Íµ≠ÎåÄÏ†ê", menu: "Îã≠Í∞àÎπÑ", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÎèô 14", img: WHITE_IMG, tags: []}
    ],
    "ÌõÑÎ¨∏": [
      {name: "ÏãúÌôçÏì∞ Í±¥ÎåÄ", menu: "Î≥∂ÏùåÎ∞•", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ ÌõÑÎ¨∏Î°ú 112", img: WHITE_IMG, tags: []}
    ],
    "Ïñ¥Î¶∞Ïù¥ÎåÄÍ≥µÏõê": [
      {name: "ÏóêÏù¥ÎøîÎû® Íµ∞ÏûêÏ†ê", menu: "ÏñëÍ≥†Í∏∞Íµ¨Ïù¥", addr: "ÏÑúÏö∏ Í¥ëÏßÑÍµ¨ Íµ∞ÏûêÎèô 50", img: WHITE_IMG, tags: []}
    ]
  };

  // localStorageÏóêÏÑú Î∂àÎü¨Ïò® Ï°∞ÌöåÏàò Ï†ÄÏû• Í∞ùÏ≤¥ (ÏóÜÏúºÎ©¥ Îπà Í∞ùÏ≤¥)
  let restaurantClicks = JSON.parse(localStorage.getItem('restaurantClicks') || '{}');

  let currentCategory = "Í±¥ÎåÄÏûÖÍµ¨";
  let currentDietTags = [];

  // ÏúÑÏπò ÌïÑÌÑ∞ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
  document.querySelectorAll('#categoryBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('#categoryBar button').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentCategory = btn.dataset.cat;
      renderRestaurants();
    });
  });

  // ÏãùÎã® ÌïÑÌÑ∞ ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (ÌÜ†Í∏Ä)
  document.querySelectorAll('#dietBar button').forEach(btn => {
    btn.addEventListener('click', () => {
      const tag = btn.dataset.tag;
      if(currentDietTags.includes(tag)){
        currentDietTags = currentDietTags.filter(t => t !== tag);
        btn.classList.remove('active');
      } else {
        currentDietTags.push(tag);
        btn.classList.add('active');
      }
      renderRestaurants();
    });
  });

  // ÌïÑÌÑ∞ Ï†ÅÏö©Ìï¥ÏÑú Î¶¨Ïä§Ìä∏ Î∞òÌôò
  function filterRestaurants(){
    let list = data[currentCategory] || [];
    if(currentDietTags.length === 0) return list;
    return list.filter(r => currentDietTags.every(tag => r.tags.includes(tag)));
  }

  // localStorageÏóê Ï°∞ÌöåÏàò Ï†ÄÏû• Î∞è Îû≠ÌÇπ ÏóÖÎç∞Ïù¥Ìä∏
  function increaseClick(name) {
    if (!restaurantClicks[name]) {
      restaurantClicks[name] = 0;
    }
    restaurantClicks[name]++;
    localStorage.setItem('restaurantClicks', JSON.stringify(restaurantClicks));
    updateRanking();
  }

  // Îû≠ÌÇπ Î™©Î°ù Í∞±Ïã†
  function updateRanking() {
    const rankingArr = Object.entries(restaurantClicks).sort((a,b) => b[1] - a[1]).slice(0, 10);
    const rankingList = document.getElementById('rankingList');
    rankingList.innerHTML = "";
    rankingArr.forEach(([name, count]) => {
      const li = document.createElement('li');
      li.textContent = `${name} (${count}Ìöå)`;
      rankingList.appendChild(li);
    });
  }

  // ÏãùÎãπ Î™©Î°ù Î†åÎçîÎßÅ
  function renderRestaurants() {
    const container = document.getElementById('restaurantList');
    container.innerHTML = "";
    const list = filterRestaurants();

    if(!list.length){
      container.innerHTML = "<p>Ï°∞Í±¥Ïóê ÎßûÎäî ÏãùÎãπÏù¥ ÏóÜÏäµÎãàÎã§.</p>";
      return;
    }

    const ul = document.createElement('ul');
    ul.className = "restaurants";

    list.forEach(r => {
      const li = document.createElement('li');
      li.className = "restaurant-item";
      li.innerHTML = `
        <img src="${r.img || WHITE_IMG}" alt="${r.name}" class="thumb" />
        <div>
          <div class="restaurant-name">${r.name}</div>
          <div class="dish-name">${r.menu}</div>
        </div>
      `;
      li.onclick = () => {
        increaseClick(r.name);
        openModal(r);
      };
      ul.appendChild(li);
    });

    container.appendChild(ul);
  }

  // Î™®Îã¨ Ïó¥Í∏∞
  function openModal(r) {
    document.getElementById('modalImg').src = r.img || WHITE_IMG;
    document.getElementById('modalName').textContent = r.name;
    document.getElementById('modalAddr').textContent = "Ï£ºÏÜå: " + (r.addr || "Ï†ïÎ≥¥ ÏóÜÏùå");
    document.getElementById('modalMenus').textContent = "ÎåÄÌëúÎ©îÎâ¥: " + (r.menu || "Ï†ïÎ≥¥ ÏóÜÏùå");
    document.getElementById('modalClicks').textContent = "Ï°∞ÌöåÏàò: " + (restaurantClicks[r.name] || 0) + "Ìöå";
    document.getElementById('modalBg').style.display = 'flex';
  }

  // Î™®Îã¨ Îã´Í∏∞
  function closeModal() {
    document.getElementById('modalBg').style.display = 'none';
  }

  // Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
  document.getElementById('modalBg').onclick = function(e) {
    if(e.target === this) closeModal();
  };

  // Ï¥àÍ∏∞ Î†åÎçîÎßÅ
  renderRestaurants();
  updateRanking();
</script>
</body>
</html>
